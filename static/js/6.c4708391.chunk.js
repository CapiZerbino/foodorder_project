(this.webpackJsonpprojetc_foodorder=this.webpackJsonpprojetc_foodorder||[]).push([[6],{140:function(e,t,n){"use strict";var r=n(167),c=n.n(r),a=n(168),o=n.n(a),s=n(103),i=n(105),l=(n(0),n(56)),d=n(2);t.a=function(e){var t=e.text,n=void 0===t?"Default":t,r=e.type,a=void 0===r?"Home":r;return Object(d.jsxs)(s.a,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",sx:{marginInlineStart:2},children:["Home"===a&&Object(d.jsx)(s.a,{component:"div",sx:{backgroundColor:"#2E3A55",width:50,height:50,marginInline:2,marginBlock:1,borderRadius:4,display:"flex",justifyContent:"center",alignContent:"center"},children:Object(d.jsx)(c.a,{color:"action",style:{color:"#fff",width:40,height:40,alignSelf:"center"}})}),Object(d.jsx)(l.b,{to:"/",style:{textDecoration:"none"},children:Object(d.jsx)(i.a,{variant:"h4",noWrap:!0,component:"div",sx:{flexGrow:1,display:{xs:"none",sm:"block"},fontWeight:"bold",color:"#2E3A55"},children:n})}),"Checkout"===a&&Object(d.jsx)(o.a,{color:"action",style:{color:"#2E3A55",width:50,height:50,marginInline:10}})]})}},309:function(e,t,n){"use strict";n.r(t);var r=n(51),c=n(322),a=n(103),o=n(325),s=n(323),i=n(298),l=n(321),d=n(324),u=n(306),j=n(310),h=n(64),b=n(313),x=n(105),m=n(139),p=n.n(m),O=n(0),f=n.n(O),g=n(52),v=n(140),y=n(305),S=n(329),k=n(315),C=n(311),w=n(2);function B(e){var t=e.sendData,n=Object(O.useState)(""),c=Object(r.a)(n,2),a=c[0],o=c[1],s=Object(O.useState)(""),i=Object(r.a)(s,2),l=i[0],d=i[1],u=Object(O.useState)(""),j=Object(r.a)(u,2),h=j[0],b=j[1];return Object(w.jsxs)(f.a.Fragment,{children:[Object(w.jsx)(x.a,{variant:"h6",gutterBottom:!0,sx:{color:"#252836"},children:"Shipping address"}),Object(w.jsxs)(k.a,{container:!0,spacing:3,children:[Object(w.jsx)(k.a,{item:!0,xs:12,children:Object(w.jsx)(C.a,{required:!0,id:"fullname",label:"Full name",fullWidth:!0,variant:"standard",onChange:function(e){o(e.target.value)},value:a})}),Object(w.jsx)(k.a,{item:!0,xs:12,children:Object(w.jsx)(C.a,{required:!0,id:"address",name:"address",label:"Address",fullWidth:!0,variant:"standard",onChange:function(e){d(e.target.value)},value:l})}),Object(w.jsx)(k.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(C.a,{required:!0,id:"phone",name:"phone",label:"Phone number",fullWidth:!0,variant:"standard",onChange:function(e){b(e.target.value)},value:h})}),Object(w.jsx)(k.a,{item:!0,xs:12,children:Object(w.jsx)(S.a,{control:Object(w.jsx)(y.a,{color:"secondary",name:"saveAddress",value:"yes"}),label:"Use this address for payment details",onClick:function(){t({name:a,phoneNumber:h,address:l})}})})]})]})}var I=n(21),N=n(327),P=n(312),E=n(316),D=n(302),W=n(218),_={layout:"vertical"},A=function(e){var t=e.currency,n=e.discount,c=e.showSpinner,a=e.handleSubmit,o=Object(W.c)(),s=Object(r.a)(o,2),i=s[0],l=i.options,d=i.isPending,u=s[1],j=Object(O.useState)(""),h=Object(r.a)(j,2),b=h[0],x=h[1];return Object(O.useEffect)((function(){u({type:"resetOptions",value:Object(I.a)(Object(I.a)({},l),{},{currency:t})})}),[t,c]),Object(w.jsxs)(w.Fragment,{children:[c&&d&&Object(w.jsx)("div",{className:"spinner"}),Object(w.jsx)(W.a,{style:_,disabled:!1,forceReRender:[n,t,_],fundingSource:void 0,createOrder:function(e,r){return r.order.create({purchase_units:[{amount:{currency_code:t,value:n}}]}).then((function(e){return x(e),console.log(b),e}))},onApprove:function(e,t){return t.order.capture().then((function(){a("paypal")}))},onError:function(e){console.error("error from the onError callback",e)}})]})};function F(e){var t=e.discount,n=e.handleSubmit,c=Object(O.useState)("paypal"),a=Object(r.a)(c,2),o=a[0],s=a[1];return Object(w.jsxs)(f.a.Fragment,{children:[Object(w.jsx)(x.a,{variant:"h6",gutterBottom:!0,children:"Payment method"}),Object(w.jsx)(k.a,{container:!0,spacing:3,children:Object(w.jsxs)(k.a,{item:!0,xs:12,md:12,children:[Object(w.jsxs)(N.a,{fullWidth:!0,sx:{marginBlockEnd:2},children:[Object(w.jsx)(P.a,{id:"demo-simple-select-label",children:"Type"}),Object(w.jsxs)(D.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o,label:"Payment method",onChange:function(e){s(e.target.value)},children:[Object(w.jsx)(E.a,{value:"paypal",children:"PayPal"}),Object(w.jsx)(E.a,{value:"cash",children:"Cash"})]})]}),"paypal"===o&&Object(w.jsx)("div",{style:{maxWidth:"750px",minHeight:"200px"},children:Object(w.jsx)(W.b,{options:{"client-id":"AZsMLZ_7y5QnrVlDLIwc07XYQ3Xl1ndbx7P7ukOlleeqgxOo_8hHx2gUNoYC4w14A8ooYhxehIcN54Bk",components:"buttons",currency:"USD"},children:Object(w.jsx)(A,{currency:"USD",discount:t,showSpinner:!1,handleSubmit:n})})})]})})]})}var q=n(328),R=n(307),U=n(297);function H(e){var t=e.cartItems,n=e.shipInfo,r=t?t.reduce((function(e,t){return e+t.qty*t.product.price}),0):0;return Object(O.useEffect)((function(){return console.log("Review: "+n.name+" "+n.address+" "+n.phoneNumber),function(){}}),[n]),Object(w.jsxs)(f.a.Fragment,{children:[Object(w.jsx)(x.a,{variant:"h6",gutterBottom:!0,children:"Order summary"}),Object(w.jsxs)(q.a,{disablePadding:!0,children:[t&&t.map((function(e){return Object(w.jsxs)(R.a,{sx:{py:1,px:0},children:[Object(w.jsx)(U.a,{primary:e.product.name,secondary:e.product.description}),Object(w.jsxs)(x.a,{variant:"body2",children:["$",e.product.price]})]},e.product.name)})),Object(w.jsxs)(R.a,{sx:{py:1,px:0},children:[Object(w.jsx)(U.a,{primary:"Total"}),Object(w.jsxs)(x.a,{variant:"subtitle1",sx:{fontWeight:700},children:["$",r]})]})]}),Object(w.jsxs)(k.a,{container:!0,spacing:2,children:[Object(w.jsxs)(k.a,{item:!0,xs:12,sm:6,children:[Object(w.jsx)(x.a,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Shipping"}),Object(w.jsx)(x.a,{gutterBottom:!0,children:n.name?n.name:" "}),Object(w.jsx)(x.a,{gutterBottom:!0,children:n.phoneNumber?n.phoneNumber:" "}),Object(w.jsx)(x.a,{gutterBottom:!0,children:n.address?n.address:" "})]}),Object(w.jsxs)(k.a,{item:!0,container:!0,direction:"column",xs:12,sm:6,children:[Object(w.jsx)(x.a,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Payment method"}),Object(w.jsx)(x.a,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Paypal"})]})]})]})}var J=["Shipping address","Review your order","Payment details"];function T(e,t,n,r,c,a){switch(e){case 0:return Object(w.jsx)(B,{sendData:n});case 1:return Object(w.jsx)(H,{cartItems:t,shipInfo:r});case 2:return Object(w.jsx)(F,{discount:c,handleSubmit:a});default:throw new Error("Unknown step")}}var L=Object(h.a)();t.default=Object(g.b)((function(e){return{cartItems:e.cart,price:e.total,discount:e.discount}}),null)((function(e){var t=Object(O.useState)(0),n=Object(r.a)(t,2),h=n[0],m=n[1],g=e.cartItems,y=e.price,S=e.discount;console.log(e.location.voucherID);var k=Object(O.useState)(null),C=Object(r.a)(k,2),B=C[0],I=C[1];Object(O.useEffect)((function(){return console.log("Checkout: "+JSON.stringify(B)),console.log("Total price: "+S),function(){}}),[B,S]);var N=function(){console.log(h),m(h+1)};return Object(w.jsxs)(b.a,{theme:L,children:[Object(w.jsx)(i.a,{}),Object(w.jsx)(c.a,{position:"absolute",color:"default",elevation:0,sx:{position:"relative",borderBottom:function(e){return"1px solid ".concat(e.palette.divider)}},children:Object(w.jsx)(v.a,{text:"Lau Chay Restaurant",type:"Checkout"})}),Object(w.jsx)(s.a,{component:"main",maxWidth:"sm",sx:{mb:4},children:Object(w.jsxs)(l.a,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[Object(w.jsx)(x.a,{component:"h1",variant:"h4",align:"center",children:"Checkout"}),Object(w.jsx)(j.a,{activeStep:h,sx:{pt:3,pb:5},children:J.map((function(e){return Object(w.jsx)(d.a,{children:Object(w.jsx)(u.a,{children:e})},e)}))}),Object(w.jsx)(f.a.Fragment,{children:h===J.length?Object(w.jsxs)(f.a.Fragment,{children:[Object(w.jsx)(x.a,{variant:"h5",gutterBottom:!0,children:"Thank you for your order."}),Object(w.jsx)(x.a,{variant:"subtitle1",children:"We will prepare your order soon."})]}):Object(w.jsxs)(f.a.Fragment,{children:[T(h,g,(function(e){I(e),console.log(g)}),B,S,(function(t){var n={phoneNumber:B.phoneNumber,total:y.toString(),voucher_id:e.location.voucherID,address:B.address,payment_method:t,order_items:g.map((function(e){return{menu_id:e.product.id.toString(),quantity:e.qty.toString()}}))};p.a.post("https://test.greenup.com.vn/api/order",JSON.stringify(n)).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),N()})),Object(w.jsxs)(a.a,{sx:{display:"flex",justifyContent:"flex-end"},children:[0!==h&&Object(w.jsx)(o.a,{onClick:function(){m(h-1)},sx:{mt:3,ml:1},children:"Back"}),Object(w.jsx)(o.a,{variant:"contained",onClick:N,sx:{mt:3,ml:1},style:{backgroundColor:"#E43122",borderRadius:10},children:h===J.length-1?"Place order":"Next"})]})]})})]})})]})}))}}]);
//# sourceMappingURL=6.c4708391.chunk.js.map